{"version":3,"file":"main.e4b7dfef15a5c6cda7bf.hot-update.js","sources":["webpack:///./src/index.tsx"],"sourcesContent":["import 'core-js/es/reflect';\nimport 'core-js/stable/reflect';\nimport 'core-js/features/reflect';\nimport 'zone.js';\nimport { createPwaApi } from 'piral-pwa';\n\nimport * as React from 'react';\nimport { render } from 'react-dom';\nimport { createInstance, createStandardApi, Dashboard, Piral } from 'piral';\nimport { createNgApi } from 'piral-ng';\nimport { layout, errors } from './layout';\nimport ReactPWAInstallProvider, { useReactPWAInstall } from 'react-pwa-install';\nimport myLogo from './assets/download.png';\nconst feedUrl =\n  process.env.NODE_ENV === 'production'\n    ? 'https://feed.piral.io/api/v1/pilet/mife-demo'\n    : 'http://localhost:9000/api/v1/pilet';\n\nconst instance = createInstance({\n  state: {\n    components: {\n      ...layout\n    },\n    errorComponents: {\n      ...errors\n    },\n    routes: {\n      '/': Dashboard\n    }\n  },\n\n  plugins: [createNgApi(), ...createStandardApi(), createPwaApi()],\n  requestPilets() {\n    const result = fetch(feedUrl)\n      .then((res) => {\n        return res.json();\n      })\n      .then((res) => res.items);\n    return result;\n  }\n});\n\nconst App = () => {\n  const { pwaInstall, supported, isInstalled } = useReactPWAInstall();\n  console.log('hello one', pwaInstall);\n  const handleClick = () => {\n    pwaInstall({\n      title: 'Install Web App',\n      logo: myLogo,\n      features: (\n        <ul>\n          <li>Cool feature 1</li>\n          <li>Cool feature 2</li>\n          <li>Even cooler feature</li>\n          <li>Works offline</li>\n        </ul>\n      ),\n      description: 'This is a very good app that does a lot of useful stuff. '\n    })\n      .then(() =>\n        alert('App installed successfully or instructions for install shown')\n      )\n      .catch(() => alert('User opted out from installing'));\n  };\n\n  return (\n    <div>\n      {supported() && !isInstalled() && (\n        <button type='button' onClick={handleClick}>\n          Install App\n        </button>\n      )}\n    </div>\n  );\n};\nrender(\n  <App>\n    <Piral instance={instance} />\n  </App>,\n  document.querySelector('#app')\n);\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAKA;AACA;AACA;AAGA;AAGA;AACA;AADA;AAPA;AAYA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AACA;AArBA;AACA;AAuBA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAQA;AAXA;AAaA;AAAA;AAGA;AAAA;AACA;AACA;AACA;AAGA;AAAA;AAAA;AAMA;AACA;AAAA;AAEA;AAAA;;;;A","sourceRoot":""}