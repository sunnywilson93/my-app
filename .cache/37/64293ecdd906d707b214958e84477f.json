{"id":"../node_modules/piral-translate/esm/create.js","dependencies":[{"name":"/Users/nc23203-wilson/Documents/pocs/my-app/node_modules/piral-translate/esm/create.js.map","includedInParent":true,"mtime":1653392427745},{"name":"/Users/nc23203-wilson/Documents/pocs/my-app/node_modules/piral-translate/src/create.ts","includedInParent":true,"mtime":1653392427745},{"name":"/Users/nc23203-wilson/Documents/pocs/my-app/package.json","includedInParent":true,"mtime":1653396690861},{"name":"/Users/nc23203-wilson/Documents/pocs/my-app/node_modules/piral-translate/package.json","includedInParent":true,"mtime":1653392427745},{"name":"./actions","loc":{"line":1,"column":30,"index":30},"parent":"/Users/nc23203-wilson/Documents/pocs/my-app/node_modules/piral-translate/esm/create.js","resolved":"/Users/nc23203-wilson/Documents/pocs/my-app/node_modules/piral-translate/esm/actions.js"},{"name":"./localize","loc":{"line":2,"column":26,"index":69},"parent":"/Users/nc23203-wilson/Documents/pocs/my-app/node_modules/piral-translate/esm/create.js","resolved":"/Users/nc23203-wilson/Documents/pocs/my-app/node_modules/piral-translate/esm/localize.js"},{"name":"./default","loc":{"line":3,"column":30,"index":113},"parent":"/Users/nc23203-wilson/Documents/pocs/my-app/node_modules/piral-translate/esm/create.js","resolved":"/Users/nc23203-wilson/Documents/pocs/my-app/node_modules/piral-translate/esm/default.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createLocaleApi = createLocaleApi;\nexports.setupLocalizer = setupLocalizer;\n\nvar _actions = require(\"./actions\");\n\nvar _localize = require(\"./localize\");\n\nvar _default = require(\"./default\");\n\n/**\n * Sets up a new localizer by using the given config.\n * @param config The configuration for the new localizer.\n */\nfunction setupLocalizer(config = {}) {\n  const msgs = config.messages || {};\n  const languages = Object.keys(msgs);\n  const defaultLang = languages[0] || 'en';\n  const computeLang = config.language;\n  const usedLang = typeof computeLang === 'function' ? computeLang(languages, defaultLang, 'en') : computeLang;\n  const language = usedLang || defaultLang;\n  return new _localize.Localizer(msgs, language, languages.length ? languages : [language], config.fallback);\n}\n/**\n * Creates new Pilet API extensions for localization.\n * @param localizer The specific localizer to be used, if any.\n */\n\n\nfunction createLocaleApi(localizer = setupLocalizer()) {\n  return context => {\n    context.defineActions((0, _actions.createActions)(localizer));\n    context.dispatch(state => Object.assign(Object.assign({}, state), {\n      components: Object.assign({\n        LanguagesPicker: _default.DefaultPicker\n      }, state.components),\n      language: {\n        loading: false,\n        available: localizer.languages,\n        selected: localizer.language\n      }\n    }));\n    return api => {\n      let localTranslations = {};\n      return {\n        getCurrentLanguage(cb) {\n          const selected = context.readState(s => s.language.selected);\n\n          if (cb) {\n            cb(selected);\n\n            const handler = ev => {\n              cb(ev.currentLanguage);\n            };\n\n            api.on('select-language', handler);\n            return () => api.off('select-language', handler);\n          }\n\n          return selected;\n        },\n\n        setTranslations(messages) {\n          localTranslations = messages;\n        },\n\n        getTranslations() {\n          return localTranslations;\n        },\n\n        translate(tag, variables) {\n          return localizer.localizeLocal(localTranslations, tag, variables);\n        }\n\n      };\n    };\n  };\n}"},"sourceMaps":{"js":{"mappings":[{"source":"../src/create.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":9,"column":0}},{"source":"../src/create.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":11,"column":0}},{"source":"../src/create.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":13,"column":0}},{"source":"../src/create.ts","name":null,"original":{"line":34,"column":0},"generated":{"line":15,"column":0}},{"source":"../src/create.ts","name":null,"original":{"line":38,"column":6},"generated":{"line":19,"column":0}},{"source":"../src/create.ts","name":null,"original":{"line":38,"column":16},"generated":{"line":19,"column":9}},{"source":"../src/create.ts","name":null,"original":{"line":38,"column":6},"generated":{"line":19,"column":23}},{"source":"../src/create.ts","name":null,"original":{"line":38,"column":31},"generated":{"line":19,"column":24}},{"source":"../src/create.ts","name":null,"original":{"line":38,"column":31},"generated":{"line":19,"column":30}},{"source":"../src/create.ts","name":null,"original":{"line":38,"column":54},"generated":{"line":19,"column":33}},{"source":"../src/create.ts","name":null,"original":{"line":38,"column":6},"generated":{"line":19,"column":35}},{"source":"../src/create.ts","name":null,"original":{"line":38,"column":56},"generated":{"line":19,"column":37}},{"source":"../src/create.ts","name":null,"original":{"line":39,"column":2},"generated":{"line":20,"column":2}},{"source":"../src/create.ts","name":null,"original":{"line":39,"column":8},"generated":{"line":20,"column":8}},{"source":"../src/create.ts","name":null,"original":{"line":39,"column":12},"generated":{"line":20,"column":12}},{"source":"../src/create.ts","name":null,"original":{"line":39,"column":15},"generated":{"line":20,"column":15}},{"source":"../src/create.ts","name":null,"original":{"line":39,"column":21},"generated":{"line":20,"column":21}},{"source":"../src/create.ts","name":null,"original":{"line":39,"column":22},"generated":{"line":20,"column":22}},{"source":"../src/create.ts","name":null,"original":{"line":39,"column":15},"generated":{"line":20,"column":30}},{"source":"../src/create.ts","name":null,"original":{"line":39,"column":34},"generated":{"line":20,"column":34}},{"source":"../src/create.ts","name":null,"original":{"line":39,"column":2},"generated":{"line":20,"column":36}},{"source":"../src/create.ts","name":null,"original":{"line":40,"column":2},"generated":{"line":21,"column":2}},{"source":"../src/create.ts","name":null,"original":{"line":40,"column":8},"generated":{"line":21,"column":8}},{"source":"../src/create.ts","name":null,"original":{"line":40,"column":17},"generated":{"line":21,"column":17}},{"source":"../src/create.ts","name":null,"original":{"line":40,"column":20},"generated":{"line":21,"column":20}},{"source":"../src/create.ts","name":null,"original":{"line":40,"column":26},"generated":{"line":21,"column":26}},{"source":"../src/create.ts","name":null,"original":{"line":40,"column":27},"generated":{"line":21,"column":27}},{"source":"../src/create.ts","name":null,"original":{"line":40,"column":20},"generated":{"line":21,"column":31}},{"source":"../src/create.ts","name":null,"original":{"line":40,"column":32},"generated":{"line":21,"column":32}},{"source":"../src/create.ts","name":null,"original":{"line":40,"column":20},"generated":{"line":21,"column":36}},{"source":"../src/create.ts","name":null,"original":{"line":40,"column":2},"generated":{"line":21,"column":37}},{"source":"../src/create.ts","name":null,"original":{"line":41,"column":2},"generated":{"line":22,"column":2}},{"source":"../src/create.ts","name":null,"original":{"line":41,"column":8},"generated":{"line":22,"column":8}},{"source":"../src/create.ts","name":null,"original":{"line":41,"column":19},"generated":{"line":22,"column":19}},{"source":"../src/create.ts","name":null,"original":{"line":41,"column":22},"generated":{"line":22,"column":22}},{"source":"../src/create.ts","name":null,"original":{"line":41,"column":31},"generated":{"line":22,"column":31}},{"source":"../src/create.ts","name":null,"original":{"line":41,"column":32},"generated":{"line":22,"column":32}},{"source":"../src/create.ts","name":null,"original":{"line":41,"column":31},"generated":{"line":22,"column":33}},{"source":"../src/create.ts","name":null,"original":{"line":41,"column":22},"generated":{"line":22,"column":34}},{"source":"../src/create.ts","name":null,"original":{"line":41,"column":38},"generated":{"line":22,"column":38}},{"source":"../src/create.ts","name":null,"original":{"line":41,"column":2},"generated":{"line":22,"column":42}},{"source":"../src/create.ts","name":null,"original":{"line":42,"column":2},"generated":{"line":23,"column":2}},{"source":"../src/create.ts","name":null,"original":{"line":42,"column":8},"generated":{"line":23,"column":8}},{"source":"../src/create.ts","name":null,"original":{"line":42,"column":19},"generated":{"line":23,"column":19}},{"source":"../src/create.ts","name":null,"original":{"line":42,"column":22},"generated":{"line":23,"column":22}},{"source":"../src/create.ts","name":null,"original":{"line":42,"column":28},"generated":{"line":23,"column":28}},{"source":"../src/create.ts","name":null,"original":{"line":42,"column":29},"generated":{"line":23,"column":29}},{"source":"../src/create.ts","name":null,"original":{"line":42,"column":2},"generated":{"line":23,"column":37}},{"source":"../src/create.ts","name":null,"original":{"line":43,"column":2},"generated":{"line":24,"column":2}},{"source":"../src/create.ts","name":null,"original":{"line":43,"column":8},"generated":{"line":24,"column":8}},{"source":"../src/create.ts","name":null,"original":{"line":43,"column":16},"generated":{"line":24,"column":16}},{"source":"../src/create.ts","name":null,"original":{"line":43,"column":19},"generated":{"line":24,"column":19}},{"source":"../src/create.ts","name":null,"original":{"line":43,"column":26},"generated":{"line":24,"column":26}},{"source":"../src/create.ts","name":null,"original":{"line":43,"column":19},"generated":{"line":24,"column":37}},{"source":"../src/create.ts","name":null,"original":{"line":43,"column":42},"generated":{"line":24,"column":42}},{"source":"../src/create.ts","name":null,"original":{"line":43,"column":19},"generated":{"line":24,"column":52}},{"source":"../src/create.ts","name":null,"original":{"line":43,"column":55},"generated":{"line":24,"column":55}},{"source":"../src/create.ts","name":null,"original":{"line":43,"column":66},"generated":{"line":24,"column":66}},{"source":"../src/create.ts","name":null,"original":{"line":43,"column":67},"generated":{"line":24,"column":67}},{"source":"../src/create.ts","name":null,"original":{"line":43,"column":66},"generated":{"line":24,"column":76}},{"source":"../src/create.ts","name":null,"original":{"line":43,"column":78},"generated":{"line":24,"column":78}},{"source":"../src/create.ts","name":null,"original":{"line":43,"column":66},"generated":{"line":24,"column":89}},{"source":"../src/create.ts","name":null,"original":{"line":43,"column":91},"generated":{"line":24,"column":91}},{"source":"../src/create.ts","name":null,"original":{"line":43,"column":66},"generated":{"line":24,"column":95}},{"source":"../src/create.ts","name":null,"original":{"line":43,"column":19},"generated":{"line":24,"column":96}},{"source":"../src/create.ts","name":null,"original":{"line":43,"column":99},"generated":{"line":24,"column":99}},{"source":"../src/create.ts","name":null,"original":{"line":43,"column":2},"generated":{"line":24,"column":110}},{"source":"../src/create.ts","name":null,"original":{"line":44,"column":2},"generated":{"line":25,"column":2}},{"source":"../src/create.ts","name":null,"original":{"line":44,"column":8},"generated":{"line":25,"column":8}},{"source":"../src/create.ts","name":null,"original":{"line":44,"column":16},"generated":{"line":25,"column":16}},{"source":"../src/create.ts","name":null,"original":{"line":44,"column":19},"generated":{"line":25,"column":19}},{"source":"../src/create.ts","name":null,"original":{"line":44,"column":27},"generated":{"line":25,"column":27}},{"source":"../src/create.ts","name":null,"original":{"line":44,"column":31},"generated":{"line":25,"column":31}},{"source":"../src/create.ts","name":null,"original":{"line":44,"column":2},"generated":{"line":25,"column":42}},{"source":"../src/create.ts","name":null,"original":{"line":45,"column":2},"generated":{"line":26,"column":2}},{"source":"../src/create.ts","name":null,"original":{"line":45,"column":9},"generated":{"line":26,"column":9}},{"source":"../src/create.ts","name":null,"original":{"line":45,"column":13},"generated":{"line":26,"column":13}},{"source":"../src/create.ts","name":null,"original":{"line":45,"column":9},"generated":{"line":26,"column":32}},{"source":"../src/create.ts","name":null,"original":{"line":45,"column":23},"generated":{"line":26,"column":33}},{"source":"../src/create.ts","name":null,"original":{"line":45,"column":9},"generated":{"line":26,"column":37}},{"source":"../src/create.ts","name":null,"original":{"line":45,"column":29},"generated":{"line":26,"column":39}},{"source":"../src/create.ts","name":null,"original":{"line":45,"column":9},"generated":{"line":26,"column":47}},{"source":"../src/create.ts","name":null,"original":{"line":45,"column":39},"generated":{"line":26,"column":49}},{"source":"../src/create.ts","name":null,"original":{"line":45,"column":48},"generated":{"line":26,"column":58}},{"source":"../src/create.ts","name":null,"original":{"line":45,"column":49},"generated":{"line":26,"column":59}},{"source":"../src/create.ts","name":null,"original":{"line":45,"column":39},"generated":{"line":26,"column":65}},{"source":"../src/create.ts","name":null,"original":{"line":45,"column":58},"generated":{"line":26,"column":68}},{"source":"../src/create.ts","name":null,"original":{"line":45,"column":39},"generated":{"line":26,"column":77}},{"source":"../src/create.ts","name":null,"original":{"line":45,"column":70},"generated":{"line":26,"column":80}},{"source":"../src/create.ts","name":null,"original":{"line":45,"column":71},"generated":{"line":26,"column":81}},{"source":"../src/create.ts","name":null,"original":{"line":45,"column":70},"generated":{"line":26,"column":89}},{"source":"../src/create.ts","name":null,"original":{"line":45,"column":9},"generated":{"line":26,"column":90}},{"source":"../src/create.ts","name":null,"original":{"line":45,"column":82},"generated":{"line":26,"column":92}},{"source":"../src/create.ts","name":null,"original":{"line":45,"column":88},"generated":{"line":26,"column":98}},{"source":"../src/create.ts","name":null,"original":{"line":45,"column":89},"generated":{"line":26,"column":99}},{"source":"../src/create.ts","name":null,"original":{"line":45,"column":9},"generated":{"line":26,"column":107}},{"source":"../src/create.ts","name":null,"original":{"line":45,"column":2},"generated":{"line":26,"column":108}},{"source":"../src/create.ts","name":null,"original":{"line":46,"column":1},"generated":{"line":27,"column":0}},{"source":"../src/create.ts","name":null,"original":{"line":48,"column":0},"generated":{"line":28,"column":0}},{"source":"../src/create.ts","name":null,"original":{"line":52,"column":6},"generated":{"line":34,"column":0}},{"source":"../src/create.ts","name":null,"original":{"line":52,"column":16},"generated":{"line":34,"column":9}},{"source":"../src/create.ts","name":null,"original":{"line":52,"column":6},"generated":{"line":34,"column":24}},{"source":"../src/create.ts","name":null,"original":{"line":52,"column":32},"generated":{"line":34,"column":25}},{"source":"../src/create.ts","name":null,"original":{"line":52,"column":32},"generated":{"line":34,"column":34}},{"source":"../src/create.ts","name":null,"original":{"line":52,"column":57},"generated":{"line":34,"column":37}},{"source":"../src/create.ts","name":null,"original":{"line":52,"column":71},"generated":{"line":34,"column":51}},{"source":"../src/create.ts","name":null,"original":{"line":52,"column":6},"generated":{"line":34,"column":53}},{"source":"../src/create.ts","name":null,"original":{"line":52,"column":73},"generated":{"line":34,"column":55}},{"source":"../src/create.ts","name":null,"original":{"line":53,"column":2},"generated":{"line":35,"column":2}},{"source":"../src/create.ts","name":null,"original":{"line":53,"column":10},"generated":{"line":35,"column":9}},{"source":"../src/create.ts","name":null,"original":{"line":53,"column":9},"generated":{"line":35,"column":16}},{"source":"../src/create.ts","name":null,"original":{"line":53,"column":21},"generated":{"line":35,"column":20}},{"source":"../src/create.ts","name":null,"original":{"line":54,"column":4},"generated":{"line":36,"column":4}},{"source":"../src/create.ts","name":null,"original":{"line":54,"column":11},"generated":{"line":36,"column":11}},{"source":"../src/create.ts","name":null,"original":{"line":54,"column":12},"generated":{"line":36,"column":12}},{"source":"../src/create.ts","name":null,"original":{"line":54,"column":4},"generated":{"line":36,"column":25}},{"source":"../src/create.ts","name":null,"original":{"line":54,"column":26},"generated":{"line":36,"column":26}},{"source":"../src/create.ts","name":null,"original":{"line":54,"column":26},"generated":{"line":36,"column":30}},{"source":"../src/create.ts","name":null,"original":{"line":54,"column":26},"generated":{"line":36,"column":52}},{"source":"../src/create.ts","name":null,"original":{"line":54,"column":40},"generated":{"line":36,"column":54}},{"source":"../src/create.ts","name":null,"original":{"line":54,"column":26},"generated":{"line":36,"column":63}},{"source":"../src/create.ts","name":null,"original":{"line":54,"column":4},"generated":{"line":36,"column":64}},{"source":"../src/create.ts","name":null,"original":{"line":56,"column":4},"generated":{"line":37,"column":4}},{"source":"../src/create.ts","name":null,"original":{"line":56,"column":11},"generated":{"line":37,"column":11}},{"source":"../src/create.ts","name":null,"original":{"line":56,"column":12},"generated":{"line":37,"column":12}},{"source":"../src/create.ts","name":null,"original":{"line":56,"column":4},"generated":{"line":37,"column":20}},{"source":"../src/create.ts","name":null,"original":{"line":56,"column":22},"generated":{"line":37,"column":21}},{"source":"../src/create.ts","name":null,"original":{"line":56,"column":21},"generated":{"line":37,"column":26}},{"source":"../src/create.ts","name":null,"original":{"line":56,"column":32},"generated":{"line":37,"column":30}},{"source":"../src/create.ts","name":null,"original":{"line":56,"column":32},"generated":{"line":37,"column":36}},{"source":"../src/create.ts","name":null,"original":{"line":56,"column":32},"generated":{"line":37,"column":37}},{"source":"../src/create.ts","name":null,"original":{"line":56,"column":32},"generated":{"line":37,"column":43}},{"source":"../src/create.ts","name":null,"original":{"line":56,"column":32},"generated":{"line":37,"column":44}},{"source":"../src/create.ts","name":null,"original":{"line":56,"column":32},"generated":{"line":37,"column":50}},{"source":"../src/create.ts","name":null,"original":{"line":56,"column":32},"generated":{"line":37,"column":51}},{"source":"../src/create.ts","name":null,"original":{"line":56,"column":32},"generated":{"line":37,"column":57}},{"source":"../src/create.ts","name":null,"original":{"line":56,"column":32},"generated":{"line":37,"column":58}},{"source":"../src/create.ts","name":null,"original":{"line":56,"column":32},"generated":{"line":37,"column":60}},{"source":"../src/create.ts","name":null,"original":{"line":57,"column":9},"generated":{"line":37,"column":62}},{"source":"../src/create.ts","name":null,"original":{"line":56,"column":32},"generated":{"line":37,"column":67}},{"source":"../src/create.ts","name":null,"original":{"line":56,"column":32},"generated":{"line":37,"column":68}},{"source":"../src/create.ts","name":null,"original":{"line":57,"column":14},"generated":{"line":37,"column":70}},{"source":"../src/create.ts","name":null,"original":{"line":58,"column":6},"generated":{"line":38,"column":6}},{"source":"../src/create.ts","name":null,"original":{"line":58,"column":16},"generated":{"line":38,"column":16}},{"source":"../src/create.ts","name":null,"original":{"line":58,"column":16},"generated":{"line":38,"column":18}},{"source":"../src/create.ts","name":null,"original":{"line":58,"column":16},"generated":{"line":38,"column":24}},{"source":"../src/create.ts","name":null,"original":{"line":58,"column":16},"generated":{"line":38,"column":25}},{"source":"../src/create.ts","name":null,"original":{"line":58,"column":16},"generated":{"line":38,"column":31}},{"source":"../src/create.ts","name":null,"original":{"line":58,"column":16},"generated":{"line":38,"column":32}},{"source":"../src/create.ts","name":null,"original":{"line":59,"column":8},"generated":{"line":39,"column":8}},{"source":"../src/create.ts","name":null,"original":{"line":59,"column":23},"generated":{"line":39,"column":23}},{"source":"../src/create.ts","name":null,"original":{"line":59,"column":25},"generated":{"line":39,"column":25}},{"source":"../src/create.ts","name":null,"original":{"line":58,"column":16},"generated":{"line":40,"column":6}},{"source":"../src/create.ts","name":null,"original":{"line":58,"column":16},"generated":{"line":40,"column":7}},{"source":"../src/create.ts","name":null,"original":{"line":60,"column":11},"generated":{"line":40,"column":9}},{"source":"../src/create.ts","name":null,"original":{"line":60,"column":16},"generated":{"line":40,"column":14}},{"source":"../src/create.ts","name":null,"original":{"line":60,"column":17},"generated":{"line":40,"column":15}},{"source":"../src/create.ts","name":null,"original":{"line":58,"column":16},"generated":{"line":40,"column":25}},{"source":"../src/create.ts","name":null,"original":{"line":57,"column":14},"generated":{"line":40,"column":26}},{"source":"../src/create.ts","name":null,"original":{"line":62,"column":6},"generated":{"line":41,"column":6}},{"source":"../src/create.ts","name":null,"original":{"line":62,"column":14},"generated":{"line":41,"column":14}},{"source":"../src/create.ts","name":null,"original":{"line":62,"column":16},"generated":{"line":41,"column":16}},{"source":"../src/create.ts","name":null,"original":{"line":63,"column":8},"generated":{"line":42,"column":8}},{"source":"../src/create.ts","name":null,"original":{"line":63,"column":15},"generated":{"line":42,"column":15}},{"source":"../src/create.ts","name":null,"original":{"line":63,"column":17},"generated":{"line":42,"column":17}},{"source":"../src/create.ts","name":null,"original":{"line":62,"column":16},"generated":{"line":42,"column":22}},{"source":"../src/create.ts","name":null,"original":{"line":64,"column":8},"generated":{"line":43,"column":8}},{"source":"../src/create.ts","name":null,"original":{"line":64,"column":17},"generated":{"line":43,"column":17}},{"source":"../src/create.ts","name":null,"original":{"line":64,"column":19},"generated":{"line":43,"column":19}},{"source":"../src/create.ts","name":null,"original":{"line":64,"column":28},"generated":{"line":43,"column":28}},{"source":"../src/create.ts","name":null,"original":{"line":64,"column":29},"generated":{"line":43,"column":29}},{"source":"../src/create.ts","name":null,"original":{"line":62,"column":16},"generated":{"line":43,"column":38}},{"source":"../src/create.ts","name":null,"original":{"line":65,"column":8},"generated":{"line":44,"column":8}},{"source":"../src/create.ts","name":null,"original":{"line":65,"column":16},"generated":{"line":44,"column":16}},{"source":"../src/create.ts","name":null,"original":{"line":65,"column":18},"generated":{"line":44,"column":18}},{"source":"../src/create.ts","name":null,"original":{"line":65,"column":27},"generated":{"line":44,"column":27}},{"source":"../src/create.ts","name":null,"original":{"line":65,"column":28},"generated":{"line":44,"column":28}},{"source":"../src/create.ts","name":null,"original":{"line":62,"column":16},"generated":{"line":45,"column":6}},{"source":"../src/create.ts","name":null,"original":{"line":57,"column":14},"generated":{"line":46,"column":4}},{"source":"../src/create.ts","name":null,"original":{"line":56,"column":32},"generated":{"line":46,"column":5}},{"source":"../src/create.ts","name":null,"original":{"line":56,"column":4},"generated":{"line":46,"column":6}},{"source":"../src/create.ts","name":null,"original":{"line":69,"column":4},"generated":{"line":47,"column":4}},{"source":"../src/create.ts","name":null,"original":{"line":69,"column":12},"generated":{"line":47,"column":11}},{"source":"../src/create.ts","name":null,"original":{"line":69,"column":11},"generated":{"line":47,"column":14}},{"source":"../src/create.ts","name":null,"original":{"line":69,"column":19},"generated":{"line":47,"column":18}},{"source":"../src/create.ts","name":null,"original":{"line":70,"column":6},"generated":{"line":48,"column":6}},{"source":"../src/create.ts","name":null,"original":{"line":70,"column":10},"generated":{"line":48,"column":10}},{"source":"../src/create.ts","name":null,"original":{"line":70,"column":27},"generated":{"line":48,"column":27}},{"source":"../src/create.ts","name":null,"original":{"line":70,"column":52},"generated":{"line":48,"column":30}},{"source":"../src/create.ts","name":null,"original":{"line":70,"column":6},"generated":{"line":48,"column":32}},{"source":"../src/create.ts","name":null,"original":{"line":72,"column":6},"generated":{"line":49,"column":6}},{"source":"../src/create.ts","name":null,"original":{"line":72,"column":13},"generated":{"line":49,"column":13}},{"source":"../src/create.ts","name":null,"original":{"line":73,"column":8},"generated":{"line":50,"column":8}},{"source":"../src/create.ts","name":null,"original":{"line":73,"column":26},"generated":{"line":50,"column":26}},{"source":"../src/create.ts","name":null,"original":{"line":73,"column":27},"generated":{"line":50,"column":27}},{"source":"../src/create.ts","name":null,"original":{"line":73,"column":26},"generated":{"line":50,"column":29}},{"source":"../src/create.ts","name":null,"original":{"line":73,"column":51},"generated":{"line":50,"column":31}},{"source":"../src/create.ts","name":null,"original":{"line":74,"column":10},"generated":{"line":51,"column":10}},{"source":"../src/create.ts","name":null,"original":{"line":74,"column":16},"generated":{"line":51,"column":16}},{"source":"../src/create.ts","name":null,"original":{"line":74,"column":24},"generated":{"line":51,"column":24}},{"source":"../src/create.ts","name":null,"original":{"line":74,"column":27},"generated":{"line":51,"column":27}},{"source":"../src/create.ts","name":null,"original":{"line":74,"column":34},"generated":{"line":51,"column":34}},{"source":"../src/create.ts","name":null,"original":{"line":74,"column":35},"generated":{"line":51,"column":35}},{"source":"../src/create.ts","name":null,"original":{"line":74,"column":27},"generated":{"line":51,"column":44}},{"source":"../src/create.ts","name":null,"original":{"line":74,"column":46},"generated":{"line":51,"column":45}},{"source":"../src/create.ts","name":null,"original":{"line":74,"column":45},"generated":{"line":51,"column":46}},{"source":"../src/create.ts","name":null,"original":{"line":74,"column":52},"generated":{"line":51,"column":50}},{"source":"../src/create.ts","name":null,"original":{"line":74,"column":53},"generated":{"line":51,"column":51}},{"source":"../src/create.ts","name":null,"original":{"line":74,"column":54},"generated":{"line":51,"column":52}},{"source":"../src/create.ts","name":null,"original":{"line":74,"column":52},"generated":{"line":51,"column":60}},{"source":"../src/create.ts","name":null,"original":{"line":74,"column":63},"generated":{"line":51,"column":61}},{"source":"../src/create.ts","name":null,"original":{"line":74,"column":27},"generated":{"line":51,"column":69}},{"source":"../src/create.ts","name":null,"original":{"line":74,"column":10},"generated":{"line":51,"column":70}},{"source":"../src/create.ts","name":null,"original":{"line":76,"column":10},"generated":{"line":53,"column":10}},{"source":"../src/create.ts","name":null,"original":{"line":76,"column":14},"generated":{"line":53,"column":14}},{"source":"../src/create.ts","name":null,"original":{"line":76,"column":10},"generated":{"line":53,"column":16}},{"source":"../src/create.ts","name":null,"original":{"line":76,"column":18},"generated":{"line":53,"column":18}},{"source":"../src/create.ts","name":null,"original":{"line":77,"column":12},"generated":{"line":54,"column":12}},{"source":"../src/create.ts","name":null,"original":{"line":77,"column":14},"generated":{"line":54,"column":14}},{"source":"../src/create.ts","name":null,"original":{"line":77,"column":15},"generated":{"line":54,"column":15}},{"source":"../src/create.ts","name":null,"original":{"line":77,"column":14},"generated":{"line":54,"column":23}},{"source":"../src/create.ts","name":null,"original":{"line":77,"column":12},"generated":{"line":54,"column":24}},{"source":"../src/create.ts","name":null,"original":{"line":78,"column":12},"generated":{"line":56,"column":12}},{"source":"../src/create.ts","name":null,"original":{"line":78,"column":18},"generated":{"line":56,"column":18}},{"source":"../src/create.ts","name":null,"original":{"line":78,"column":25},"generated":{"line":56,"column":25}},{"source":"../src/create.ts","name":null,"original":{"line":78,"column":29},"generated":{"line":56,"column":28}},{"source":"../src/create.ts","name":null,"original":{"line":78,"column":28},"generated":{"line":56,"column":30}},{"source":"../src/create.ts","name":null,"original":{"line":78,"column":61},"generated":{"line":56,"column":34}},{"source":"../src/create.ts","name":null,"original":{"line":79,"column":14},"generated":{"line":57,"column":14}},{"source":"../src/create.ts","name":null,"original":{"line":79,"column":16},"generated":{"line":57,"column":16}},{"source":"../src/create.ts","name":null,"original":{"line":79,"column":17},"generated":{"line":57,"column":17}},{"source":"../src/create.ts","name":null,"original":{"line":79,"column":19},"generated":{"line":57,"column":19}},{"source":"../src/create.ts","name":null,"original":{"line":79,"column":20},"generated":{"line":57,"column":20}},{"source":"../src/create.ts","name":null,"original":{"line":79,"column":16},"generated":{"line":57,"column":35}},{"source":"../src/create.ts","name":null,"original":{"line":79,"column":14},"generated":{"line":57,"column":36}},{"source":"../src/create.ts","name":null,"original":{"line":80,"column":13},"generated":{"line":58,"column":12}},{"source":"../src/create.ts","name":null,"original":{"line":78,"column":12},"generated":{"line":58,"column":13}},{"source":"../src/create.ts","name":null,"original":{"line":81,"column":12},"generated":{"line":60,"column":12}},{"source":"../src/create.ts","name":null,"original":{"line":81,"column":15},"generated":{"line":60,"column":15}},{"source":"../src/create.ts","name":null,"original":{"line":81,"column":16},"generated":{"line":60,"column":16}},{"source":"../src/create.ts","name":null,"original":{"line":81,"column":12},"generated":{"line":60,"column":18}},{"source":"../src/create.ts","name":null,"original":{"line":81,"column":19},"generated":{"line":60,"column":19}},{"source":"../src/create.ts","name":null,"original":{"line":81,"column":12},"generated":{"line":60,"column":36}},{"source":"../src/create.ts","name":null,"original":{"line":81,"column":38},"generated":{"line":60,"column":38}},{"source":"../src/create.ts","name":null,"original":{"line":81,"column":12},"generated":{"line":60,"column":45}},{"source":"../src/create.ts","name":null,"original":{"line":82,"column":12},"generated":{"line":61,"column":12}},{"source":"../src/create.ts","name":null,"original":{"line":82,"column":19},"generated":{"line":61,"column":19}},{"source":"../src/create.ts","name":null,"original":{"line":82,"column":25},"generated":{"line":61,"column":25}},{"source":"../src/create.ts","name":null,"original":{"line":82,"column":28},"generated":{"line":61,"column":28}},{"source":"../src/create.ts","name":null,"original":{"line":82,"column":29},"generated":{"line":61,"column":29}},{"source":"../src/create.ts","name":null,"original":{"line":82,"column":25},"generated":{"line":61,"column":32}},{"source":"../src/create.ts","name":null,"original":{"line":82,"column":33},"generated":{"line":61,"column":33}},{"source":"../src/create.ts","name":null,"original":{"line":82,"column":25},"generated":{"line":61,"column":50}},{"source":"../src/create.ts","name":null,"original":{"line":82,"column":52},"generated":{"line":61,"column":52}},{"source":"../src/create.ts","name":null,"original":{"line":82,"column":25},"generated":{"line":61,"column":59}},{"source":"../src/create.ts","name":null,"original":{"line":82,"column":12},"generated":{"line":61,"column":60}},{"source":"../src/create.ts","name":null,"original":{"line":83,"column":11},"generated":{"line":62,"column":10}},{"source":"../src/create.ts","name":null,"original":{"line":85,"column":10},"generated":{"line":64,"column":10}},{"source":"../src/create.ts","name":null,"original":{"line":85,"column":17},"generated":{"line":64,"column":17}},{"source":"../src/create.ts","name":null,"original":{"line":85,"column":10},"generated":{"line":64,"column":25}},{"source":"../src/create.ts","name":null,"original":{"line":86,"column":9},"generated":{"line":65,"column":8}},{"source":"../src/create.ts","name":null,"original":{"line":72,"column":13},"generated":{"line":65,"column":9}},{"source":"../src/create.ts","name":null,"original":{"line":87,"column":8},"generated":{"line":67,"column":8}},{"source":"../src/create.ts","name":null,"original":{"line":87,"column":23},"generated":{"line":67,"column":23}},{"source":"../src/create.ts","name":null,"original":{"line":87,"column":24},"generated":{"line":67,"column":24}},{"source":"../src/create.ts","name":null,"original":{"line":87,"column":23},"generated":{"line":67,"column":32}},{"source":"../src/create.ts","name":null,"original":{"line":87,"column":32},"generated":{"line":67,"column":34}},{"source":"../src/create.ts","name":null,"original":{"line":88,"column":10},"generated":{"line":68,"column":10}},{"source":"../src/create.ts","name":null,"original":{"line":88,"column":27},"generated":{"line":68,"column":27}},{"source":"../src/create.ts","name":null,"original":{"line":88,"column":30},"generated":{"line":68,"column":30}},{"source":"../src/create.ts","name":null,"original":{"line":88,"column":10},"generated":{"line":68,"column":38}},{"source":"../src/create.ts","name":null,"original":{"line":89,"column":9},"generated":{"line":69,"column":8}},{"source":"../src/create.ts","name":null,"original":{"line":72,"column":13},"generated":{"line":69,"column":9}},{"source":"../src/create.ts","name":null,"original":{"line":90,"column":8},"generated":{"line":71,"column":8}},{"source":"../src/create.ts","name":null,"original":{"line":90,"column":23},"generated":{"line":71,"column":23}},{"source":"../src/create.ts","name":null,"original":{"line":90,"column":23},"generated":{"line":71,"column":26}},{"source":"../src/create.ts","name":null,"original":{"line":91,"column":10},"generated":{"line":72,"column":10}},{"source":"../src/create.ts","name":null,"original":{"line":91,"column":17},"generated":{"line":72,"column":17}},{"source":"../src/create.ts","name":null,"original":{"line":91,"column":10},"generated":{"line":72,"column":34}},{"source":"../src/create.ts","name":null,"original":{"line":92,"column":9},"generated":{"line":73,"column":8}},{"source":"../src/create.ts","name":null,"original":{"line":72,"column":13},"generated":{"line":73,"column":9}},{"source":"../src/create.ts","name":null,"original":{"line":93,"column":8},"generated":{"line":75,"column":8}},{"source":"../src/create.ts","name":null,"original":{"line":93,"column":17},"generated":{"line":75,"column":17}},{"source":"../src/create.ts","name":null,"original":{"line":93,"column":18},"generated":{"line":75,"column":18}},{"source":"../src/create.ts","name":null,"original":{"line":93,"column":17},"generated":{"line":75,"column":21}},{"source":"../src/create.ts","name":null,"original":{"line":93,"column":23},"generated":{"line":75,"column":23}},{"source":"../src/create.ts","name":null,"original":{"line":93,"column":17},"generated":{"line":75,"column":32}},{"source":"../src/create.ts","name":null,"original":{"line":93,"column":32},"generated":{"line":75,"column":34}},{"source":"../src/create.ts","name":null,"original":{"line":94,"column":10},"generated":{"line":76,"column":10}},{"source":"../src/create.ts","name":null,"original":{"line":94,"column":17},"generated":{"line":76,"column":17}},{"source":"../src/create.ts","name":null,"original":{"line":94,"column":26},"generated":{"line":76,"column":26}},{"source":"../src/create.ts","name":null,"original":{"line":94,"column":27},"generated":{"line":76,"column":27}},{"source":"../src/create.ts","name":null,"original":{"line":94,"column":17},"generated":{"line":76,"column":40}},{"source":"../src/create.ts","name":null,"original":{"line":94,"column":41},"generated":{"line":76,"column":41}},{"source":"../src/create.ts","name":null,"original":{"line":94,"column":17},"generated":{"line":76,"column":58}},{"source":"../src/create.ts","name":null,"original":{"line":94,"column":60},"generated":{"line":76,"column":60}},{"source":"../src/create.ts","name":null,"original":{"line":94,"column":17},"generated":{"line":76,"column":63}},{"source":"../src/create.ts","name":null,"original":{"line":94,"column":65},"generated":{"line":76,"column":65}},{"source":"../src/create.ts","name":null,"original":{"line":94,"column":17},"generated":{"line":76,"column":74}},{"source":"../src/create.ts","name":null,"original":{"line":94,"column":10},"generated":{"line":76,"column":75}},{"source":"../src/create.ts","name":null,"original":{"line":95,"column":9},"generated":{"line":77,"column":8}},{"source":"../src/create.ts","name":null,"original":{"line":72,"column":13},"generated":{"line":79,"column":6}},{"source":"../src/create.ts","name":null,"original":{"line":72,"column":6},"generated":{"line":79,"column":7}},{"source":"../src/create.ts","name":null,"original":{"line":97,"column":5},"generated":{"line":80,"column":4}},{"source":"../src/create.ts","name":null,"original":{"line":69,"column":4},"generated":{"line":80,"column":5}},{"source":"../src/create.ts","name":null,"original":{"line":98,"column":3},"generated":{"line":81,"column":2}},{"source":"../src/create.ts","name":null,"original":{"line":53,"column":2},"generated":{"line":81,"column":3}},{"source":"../src/create.ts","name":null,"original":{"line":99,"column":1},"generated":{"line":82,"column":0}}],"sources":{"../src/create.ts":"import type { PiralPlugin } from 'piral-core';\nimport { createActions } from './actions';\nimport { Localizer } from './localize';\nimport { DefaultPicker } from './default';\nimport { PiletLocaleApi, LocalizationMessages, Localizable, PiralSelectLanguageEvent } from './types';\n\nexport interface TranslationFallback {\n  (key: string, language: string): string;\n}\n\nexport interface RetrieveCurrentLanguage {\n  /**\n   * A function to identify the current language.\n   */\n  (languages: Array<string>, defaultLanguage: string, fallbackLanguage?: string): string;\n}\n\nexport interface LocaleConfig {\n  /**\n   * Sets the default (global) localization messages.\n   * @default {}\n   */\n  messages?: LocalizationMessages;\n  /**\n   * Sets the default language to use.\n   */\n  language?: string | RetrieveCurrentLanguage;\n  /**\n   * Sets the optional fallback to use.\n   */\n  fallback?: TranslationFallback;\n}\n\n/**\n * Sets up a new localizer by using the given config.\n * @param config The configuration for the new localizer.\n */\nexport function setupLocalizer(config: LocaleConfig = {}): Localizable {\n  const msgs = config.messages || {};\n  const languages = Object.keys(msgs);\n  const defaultLang = languages[0] || 'en';\n  const computeLang = config.language;\n  const usedLang = typeof computeLang === 'function' ? computeLang(languages, defaultLang, 'en') : computeLang;\n  const language = usedLang || defaultLang;\n  return new Localizer(msgs, language, languages.length ? languages : [language], config.fallback);\n}\n\n/**\n * Creates new Pilet API extensions for localization.\n * @param localizer The specific localizer to be used, if any.\n */\nexport function createLocaleApi(localizer: Localizable = setupLocalizer()): PiralPlugin<PiletLocaleApi> {\n  return (context) => {\n    context.defineActions(createActions(localizer));\n\n    context.dispatch((state) => ({\n      ...state,\n      components: {\n        LanguagesPicker: DefaultPicker,\n        ...state.components,\n      },\n      language: {\n        loading: false,\n        available: localizer.languages,\n        selected: localizer.language,\n      },\n    }));\n\n    return (api) => {\n      let localTranslations: LocalizationMessages = {};\n\n      return {\n        getCurrentLanguage(cb?: (l: string) => void): any {\n          const selected = context.readState((s) => s.language.selected);\n\n          if (cb) {\n            cb(selected);\n            const handler = (ev: PiralSelectLanguageEvent) => {\n              cb(ev.currentLanguage);\n            };\n            api.on('select-language', handler);\n            return () => api.off('select-language', handler);\n          }\n\n          return selected;\n        },\n        setTranslations(messages) {\n          localTranslations = messages;\n        },\n        getTranslations() {\n          return localTranslations;\n        },\n        translate(tag, variables) {\n          return localizer.localizeLocal(localTranslations, tag, variables);\n        },\n      };\n    };\n  };\n}\n"},"lineCount":null}},"error":null,"hash":"36743d9e36be75aaaedd0f82254bbb89","cacheData":{"env":{}}}