"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createPiletOptions = void 0;
const piral_base_1 = require("piral-base");
const modules_1 = require("./modules");
function createPiletOptions({ context, loaders, loaderConfig, availablePilets, strategy, createApi, loadPilet, requestPilets, shareDependencies, debug, }) {
    const options = {
        config: loaderConfig,
        strategy,
        loadPilet: (0, piral_base_1.extendLoader)(loadPilet !== null && loadPilet !== void 0 ? loadPilet : (0, piral_base_1.getDefaultLoader)(loaderConfig), loaders),
        createApi,
        pilets: availablePilets,
        fetchPilets: requestPilets,
        dependencies: shareDependencies(modules_1.globalDependencies),
    };
    // if we build the debug version of piral (debug and emulator build)
    if (process.env.DEBUG_PIRAL) {
        const { integrate } = require('../debug-piral');
        integrate(context, options, debug);
    }
    // if we build the emulator version of piral (shipped to pilets)
    if (process.env.DEBUG_PILET) {
        const { integrate } = require('../debug-pilet');
        integrate(context, options);
    }
    return options;
}
exports.createPiletOptions = createPiletOptions;
//# sourceMappingURL=helpers.js.map