"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.RootListener = void 0;
const React = require("react");
const hooks_1 = require("./hooks");
const modules_1 = require("./modules");
const RootListener = () => {
    const context = (0, hooks_1.useGlobalStateContext)();
    React.useLayoutEffect(() => {
        if (typeof document !== 'undefined') {
            const handler = (ev) => {
                ev.stopPropagation();
                const { target, props } = ev.detail;
                const [dispose, update] = (0, modules_1.renderElement)(context, target, props);
                target.dispose = dispose;
                target.update = update;
            };
            document.body.addEventListener('render-html', handler, false);
            return () => {
                document.body.removeEventListener('render-html', handler, false);
            };
        }
    }, [context]);
    return null;
};
exports.RootListener = RootListener;
//# sourceMappingURL=RootListener.js.map