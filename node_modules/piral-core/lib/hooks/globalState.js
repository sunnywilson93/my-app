"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useGlobalState = exports.useGlobalStateContext = void 0;
const react_1 = require("react");
const react_atom_1 = require("@dbeining/react-atom");
const stateContext_1 = require("../state/stateContext");
const useGlobalAtom = typeof window !== 'undefined' ? react_atom_1.useAtom : useDirectAtom;
function useDirectAtom(atom, opts) {
    const state = (0, react_atom_1.deref)(atom);
    const select = opts && opts.select;
    return typeof select === 'function' ? select(state) : state;
}
/**
 * Hook to obtain the global state context, which gives you directly
 * all actions, state, and more of the Piral instance.
 * If you are only interested in reading out the state, use the
 * `useGlobalState` hook instead.
 */
function useGlobalStateContext() {
    return (0, react_1.useContext)(stateContext_1.StateContext);
}
exports.useGlobalStateContext = useGlobalStateContext;
function useGlobalState(select) {
    const { state } = useGlobalStateContext();
    return useGlobalAtom(state, select && { select });
}
exports.useGlobalState = useGlobalState;
//# sourceMappingURL=globalState.js.map