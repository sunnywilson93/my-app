"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useTranslate = exports.useDynamicLanguage = void 0;
const react_1 = require("react");
const piral_core_1 = require("piral-core");
function useDynamicLanguage(defaultSelected, load) {
    const [selected, setSelected] = (0, react_1.useState)(defaultSelected);
    const { selectLanguage, setTranslations, getTranslations } = (0, piral_core_1.useActions)();
    (0, react_1.useEffect)(() => {
        let active = true;
        const current = getTranslations(selected);
        selectLanguage(undefined);
        load(selected, current).then((result) => {
            if (active) {
                setTranslations(selected, result);
                selectLanguage(selected);
            }
        }, (err) => console.error(err));
        return () => {
            active = false;
        };
    }, [selected]);
    return [selected, setSelected];
}
exports.useDynamicLanguage = useDynamicLanguage;
function useTranslate() {
    const { translate } = (0, piral_core_1.useActions)();
    (0, piral_core_1.useGlobalState)((m) => m.language.selected);
    return translate;
}
exports.useTranslate = useTranslate;
//# sourceMappingURL=hooks.js.map