"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.saveFile = exports.readFile = void 0;
const fs_1 = require("fs");
const path_1 = require("path");
function readFile(server) {
    return (req, res) => {
        const { name } = req.params;
        const file = Buffer.from(name, 'base64').toString();
        fs_1.readFile(file, 'utf8', (err, content) => {
            if (err) {
                server.emit('error', err);
            }
            res.json({
                file,
                content,
                type: path_1.extname(file),
            });
        });
    };
}
exports.readFile = readFile;
function saveFile(server) {
    return (req, res) => {
        const { name } = req.params;
        const file = Buffer.from(name, 'base64').toString();
        const content = req.body;
        fs_1.writeFile(file, content, (err) => {
            if (err) {
                server.emit('error', err);
            }
            res.sendStatus(200);
        });
    };
}
exports.saveFile = saveFile;
